<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .table-input {
            width: 100%;
        }

        .input-table > div {
            display: flex;
        }

        table {
            width: 100%;
        }

        .w-full {
            padding: 1em;
        }

        footer {
            display: flex;
            margin-top: auto;
            height: 4em;
            background: rgb(19, 18, 18);
            color: #fff;
        }

        footer > p {
            margin: auto;
        }
    </style>
    <script>
        let COLS = [];
        let prefr = 0;
        let FRR = 0;
         function Comparator(a, b) {
            if (a[1] < b[1]) return -1;
            if (a[1] > b[1]) return 1;
            return 0;
        }

        function refreshTable() {
            let tbody = document.getElementById('principal-table-body');
            let totalCol = document.createElement('tr');
            let total = 0;
            let extranose = -0.001;
            COCOLS = COLS;
            tbody.innerHTML = '';
            for(let j = 0; j < COLS.length; j++){
                total = total + COLS[j][0]
            }
            for(let i = 0; i < COLS.length; i++){
                let fa = 0;
                let fr = parseFloat((COLS[i][0] / total).toFixed(3));
                console.log(typeof(fr))
                try {
                    fa = COCOLS[i-1][2] + COLS[i][0]
                    COCOLS[i].push(fa)
                } catch(e){
                    fa = COLS[i][0];
                    COCOLS[i].push(fa)
                }
                
                if(prefr == 0){
                    console.log(fr)
                    prefr = fr;
                    FRR = fr;
                } else {
                    FRR = prefr + fr;
                    prefr = FRR;
                    console.log(FRR)
                }
                extranose = extranose + 0.001
                console.log(prefr)
                console.log(FRR)
                if(i + 1 >= COLS.length){
                    FRR = 1
                } else {
                        FRR = parseFloat(`0.${`${(FRR - 1 - i).toFixed(3)}`.split(".")[1]}`)
                }
                let newCol = document.createElement('tr');
                newCol.innerHTML = `
                    <td class='input-table border border-gray-200 px-4 py-2'>${COLS[i][1]}</td>
                    <td class='input-table border border-gray-200 px-4 py-2'>${COLS[i][0]}</td>
                    <td class='input-table border border-gray-200 px-4 py-2'>${fr}</td>
                    <td class='input-table border border-gray-200 px-4 py-2'>${fa}</td>
                    <td class='input-table border border-gray-200 px-4 py-2'>${FRR.toFixed(3)}</td>
                    <td style="text-align:center;" class='input-table border border-gray-200 px-4 py-2'>${((COLS[i][0] / total).toFixed(3) * 100).toFixed(2)}</td>
                `;
                tbody.appendChild(newCol);
            }
            totalCol.innerHTML = `
                <td class='input-table px-4 py-2 border border-gray-200'>Total:</td>
                <td class='input-table px-4 py-2 border border-gray-200' id='colTotal'>
                    ${total}
                </td>
            `;
            tbody.appendChild(totalCol);
        }

        function addCol(){
            let xi = document.getElementById('xi').value;
            let fa = document.getElementById('fa').value;
            fa = parseInt(fa);
            if(xi != '' && fa != ''){
                COLS.push([parseFloat(parseFloat(fa).toFixed(3)),xi])
                COLS = COLS.sort(Comparator)
                refreshTable()
            } else {
                document.getElementById('input-alert').style.display = 'block'
            }
            document.getElementById('xi').value = '';
            document.getElementById('fa').value = '';
        }


    </script>
</head>
<body>
<nav class="flex items-center justify-between flex-wrap bg-teal-500 p-6">
  <div class="flex items-center flex-shrink-0 text-white mr-6">
    <span class="font-semibold text-xl tracking-tight">Tablas de Frecuencias </span>
  </div>
</nav>
    <div class="container mx-auto">
        <div class="flex flex-wrap">
            <div class="w-full sm:w-1/2">
                <table class="border-collapse border-2 border-gray-300">
                    <thead>
                        <tr>
                            <th class="border border-gray-300 px-4 py-2 text-gray-800">X<sub>i</sub></th>
                            <th class="border border-gray-300 px-4 py-2 text-gray-800">f<sub>a</sub></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="input-table border border-gray-400">
                                <input placeholder="Xi" id='xi' class="table-input appearance-none w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                            </td>
                            <td class="input-table border border-gray-400">
                                <div>
                                    <input placeholder="fa" id='fa' type="number" class="table-input appearance-none w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                                    <button onClick="addCol()" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Agregar</button>
                                </div>
                            </td>
                        </tr>
                    <tbody>
                </table>
                <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" style="display: none;" id="input-alert" role="alert">
                  <span class="block sm:inline">Ingrese todos los Valores</span>
                  <span class="absolute top-0 bottom-0 right-0 px-4 py-3">
                    <svg class="fill-current h-6 w-6 text-red-500" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Close</title><path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/></svg>
                  </span>
                </div>
            </div>
            <div class="w-full sm:w-1/2">
                <table class="table-fixed border-collapse border-2 border-gray-300">
                    <thead>
                        <tr>
                            <th class="border border-gray-300 px-4 py-2 text-gray-800">X<sub>i</sub></th>
                            <th class="border border-gray-300 px-4 py-2 text-gray-800">f<sub>a</sub></th>
                            <th class="border border-gray-300 px-4 py-2 text-gray-800">f<sub>r</sub></th>
                            <th class="border border-gray-300 px-4 py-2 text-gray-800">F<sub>a</sub></th>
                            <th class="border border-gray-300 px-4 py-2 text-gray-800">F<sub>r</sub></th>
                            <th class="border border-gray-300 px-4 py-2 text-gray-800">%</th>
                        </tr>
                    </thead>
                    <tbody id='principal-table-body'>

                    <tbody>
                </table>  
            </div>
            
        </div>
    </div>
    <footer>
        <p>I.J.V.L</p>
    </footer>
</body>
</html>
